From f341ae05b10ba8b0f56773ac56897195f3291f8b Mon Sep 17 00:00:00 2001
From: chalesyu <574249312@qq.com>
Date: Fri, 5 Nov 2021 00:00:00 +0800
Subject: [PATCH 6/7] a63_dram_debug

---
 arch/arm/mach-sunxi/clock_sun50i_h6.c | 1 +
 arch/arm/mach-sunxi/dram_sun50i_h6.c  | 6 +++---
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/arch/arm/mach-sunxi/clock_sun50i_h6.c b/arch/arm/mach-sunxi/clock_sun50i_h6.c
index a947463e0a..51e468213e 100644
--- a/arch/arm/mach-sunxi/clock_sun50i_h6.c
+++ b/arch/arm/mach-sunxi/clock_sun50i_h6.c
@@ -1,3 +1,4 @@
+#define DEBUG
 #include <common.h>
 #include <asm/io.h>
 #include <asm/arch/cpu.h>
diff --git a/arch/arm/mach-sunxi/dram_sun50i_h6.c b/arch/arm/mach-sunxi/dram_sun50i_h6.c
index f3ecccf8fa..9668d09a05 100644
--- a/arch/arm/mach-sunxi/dram_sun50i_h6.c
+++ b/arch/arm/mach-sunxi/dram_sun50i_h6.c
@@ -520,7 +520,7 @@ static bool mctl_channel_init(struct dram_para *para)
 	if (para->type == SUNXI_DRAM_TYPE_DDR3)
 		val |= PIR_DRAMRST | PIR_WL;
 	debug("doing mctl_phy_pir_init-error-skip\n");
-//	mctl_phy_pir_init(val);
+	mctl_phy_pir_init(val);
 
 	debug("Now at: TODO: DDR4 types\n");
 	/* TODO: DDR4 types ? */
@@ -599,7 +599,7 @@ static void mctl_auto_detect_rank_width(struct dram_para *para)
 	 * on HW with full bus width and rank = 2, but only 1/4 RAM would be
 	 * visible.
 	 */
-
+/*
 	debug("testing 32-bit width, rank = 2\n");
 	para->bus_full_width = 1;
 	para->ranks = 2;
@@ -617,7 +617,7 @@ static void mctl_auto_detect_rank_width(struct dram_para *para)
 	para->ranks = 2;
 	if (mctl_core_init(para))
 		return;
-
+*/
 	debug("testing 16-bit width, rank = 1\n");
 	para->bus_full_width = 0;
 	para->ranks = 1;
--

